create table om_user
(
id INTEGER GENERATED BY DEFAULT AS IDENTITY,
user_name varchar(300),
password varchar(300),
show_name varchar(300) ,
desc varchar(1000),
create_time datetime DEFAULT CURRENT_TIMESTAMP ,
update_time datetime DEFAULT CURRENT_TIMESTAMP ,
enable char(1) DEFAULT '1',
PRIMARY KEY (user_name)
);
insert into om_user(id,user_name,password,show_name,desc) values(100,'admin','admin','admin','管理员');
insert into om_user(user_name,password,show_name,desc) values('qry','qry','qry','查询');

select * from om_user where user_name='admin';

create table om_role
(
id INTEGER GENERATED BY DEFAULT AS IDENTITY,
role_name varchar(300),
desc varchar(1000),
create_time datetime DEFAULT CURRENT_TIMESTAMP ,
update_time datetime DEFAULT CURRENT_TIMESTAMP ,
enable char(1) DEFAULT '1',
PRIMARY KEY (role_name)
);
insert into om_role(id,role_name) values(100,'管理员');
insert into om_role(role_name) values('查询');

select * from om_role where rid in (
select rid from om_user_role where uid in (select uid from om_user where user_name ='admin')
);

create table om_permission
(
id INTEGER GENERATED BY DEFAULT AS IDENTITY,
permission_name varchar(300),
desc varchar(1000),
create_time datetime DEFAULT CURRENT_TIMESTAMP ,
update_time datetime DEFAULT CURRENT_TIMESTAMP ,
enable char(1) DEFAULT '1',
PRIMARY KEY (permission_name)
);
insert into om_permission(id,permission_name,desc) values(100,'select','查询');
insert into om_permission(permission_name,desc) values('modify','修改');
insert into om_permission(permission_name,desc) values('delete','删除');

create table om_page
(
id INTEGER GENERATED BY DEFAULT AS IDENTITY,
page_id INTEGER,
page_name varchar(300),
feather varchar(128),
icon varchar(128),
page_title varchar(128),
parent  INTEGER DEFAULT 0,
desc varchar(1000),
create_time datetime DEFAULT CURRENT_TIMESTAMP ,
update_time datetime DEFAULT CURRENT_TIMESTAMP ,
enable char(1) DEFAULT '1',
PRIMARY KEY (page_name)
);

insert into om_page (id,page_id,page_name,feather,icon,page_title,desc) values(1000,100,'vue-mon.html','home','el-icon-setting','监控','监控');
insert into om_page (page_id,page_name,feather,icon,page_title,desc) values(100,'vue-card-index.html','home','el-icon-setting','Card','Card');


create table om_token
(
id INTEGER GENERATED BY DEFAULT AS IDENTITY,
token varchar(300),
create_time datetime DEFAULT CURRENT_TIMESTAMP ,
update_time datetime DEFAULT CURRENT_TIMESTAMP ,
enable char(1) DEFAULT '1',
PRIMARY KEY (Id)
);
insert into om_token (token) values('eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiIxMDAwMSIsInN1YiI6InFyeSIsImlhdCI6MTU2NTE3MDIyMywiaXNzIjoicXJ5IiwiYXVkIjoicXJ5IiwiZXhwIjoxNTY1NjcwODc3fQ.QxZO6BsEUZUOeIiULqURYis4V4lrA2GfNVLIKssjUjg');



create table om_user_role
(
id INTEGER GENERATED BY DEFAULT AS IDENTITY,
user_id decimal(11,0),
role_id decimal(11,0),
create_time datetime DEFAULT CURRENT_TIMESTAMP ,
update_time datetime DEFAULT CURRENT_TIMESTAMP ,
enable char(1) DEFAULT '1',
PRIMARY KEY (user_id,role_id)
);
insert into om_user_role values(100000,100,100,'2019-08-06 14:02:00','2019-08-06 14:02:00','1');

create table om_url
(
id INTEGER GENERATED BY DEFAULT AS IDENTITY,
url varchar(300),
page_name  varchar(300),
permission_id integer,
desc varchar(1000),
create_time datetime DEFAULT CURRENT_TIMESTAMP ,
update_time datetime DEFAULT CURRENT_TIMESTAMP ,
enable char(1) DEFAULT '1',
PRIMARY KEY (url)
);

insert into om_url (id,url,permission_id,user_id,role_id,desc) values(10000,'/api/mon',100,100,100,'登录');
insert into om_url (url,permission_id,user_id,role_id,desc) values('/api/permission/url/get',100,100,100,'权限读取');
insert into om_url (url,permission_id,user_id,role_id,desc) values('/api/permission/url/upd',100,100,100,'权限修改');
insert into om_url (url,permission_id,user_id,role_id,desc) values('/api/permission/url/del',100,100,100,'权限删除');
insert into om_url (url,permission_id,user_id,role_id,desc) values('/api/permission/url/add',100,100,100,'权限新增');

create table om_user_page
(
id INTEGER GENERATED BY DEFAULT AS IDENTITY,
page_id INTEGER,
user_id INTEGER,
role_id INTEGER,
create_time datetime DEFAULT CURRENT_TIMESTAMP ,
update_time datetime DEFAULT CURRENT_TIMESTAMP ,
enable char(1) DEFAULT '1',
PRIMARY KEY (page_id,user_id,role_id)
);
insert into om_user_page (id,page_id,user_id,role_id) values(10000,100,100,100);
insert into om_user_page (page_id,user_id,role_id) values(90,101,101);

create table om_right
(
id INTEGER GENERATED BY DEFAULT AS IDENTITY,
url_id INTEGER,
user_id INTEGER,
role_id INTEGER,
permission_id INTEGER,
create_time datetime DEFAULT CURRENT_TIMESTAMP ,
update_time datetime DEFAULT CURRENT_TIMESTAMP ,
enable char(1) DEFAULT '1',
PRIMARY KEY (url_id,user_id,role_id)
);
insert into om_right (id,user_id,role_id,permission_id) values(10000,100,100,100);




